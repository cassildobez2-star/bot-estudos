<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<title>MatematicaBC</title>
<style>
body{
    margin:0;
    font-family:Arial;
    background:#0f172a;
    color:white;
}

/* HEADER */
.header{
    background:#1e293b;
    padding:15px;
    display:flex;
    justify-content:space-between;
    align-items:center;
}

.menu-btn{
    font-size:22px;
    cursor:pointer;
}

/* MENU LATERAL */
.sidebar{
    position:fixed;
    left:-250px;
    top:0;
    width:250px;
    height:100%;
    background:#1e293b;
    padding:20px;
    transition:0.3s;
}

.sidebar.active{
    left:0;
}

.sidebar button{
    width:100%;
    padding:10px;
    margin:10px 0;
    background:#334155;
    border:none;
    color:white;
    cursor:pointer;
}

/* CONTEÚDO */
.content{
    padding:40px;
    text-align:center;
}

input{
    padding:15px;
    width:300px;
    font-size:18px;
}

button{
    padding:10px 20px;
    margin-top:15px;
    background:#3b82f6;
    border:none;
    color:white;
    cursor:pointer;
}

.resultado{
    margin-top:20px;
    font-size:20px;
}
</style>
</head>

<body>

<div class="header">
    <div class="menu-btn" onclick="toggleMenu()">☰</div>
    <div>MatematicaBC</div>
</div>

<div class="sidebar" id="menu">
    <h3>Cálculo</h3>
    <button onclick="setModo('derivada')">Derivada</button>
    <button onclick="setModo('integral')">Integral</button>
    <button onclick="setModo('limite')">Limite</button>

    <h3>Combinatória</h3>
    <button onclick="setModo('fatorial')">Fatorial</button>
    <button onclick="setModo('combinacao')">Combinação</button>
    <button onclick="setModo('permutacao')">Permutação</button>
</div>

<div class="content">
    <h2>Calculadora</h2>
    <input id="input" placeholder="Digite a expressão">
    <br>
    <button onclick="calcular()">Calcular</button>
    <div id="resultado" class="resultado"></div>
</div>

<script>

let modoAtual="equacao";

function toggleMenu(){
    document.getElementById("menu").classList.toggle("active");
}

function setModo(modo){
    modoAtual=modo;
    alert("Modo selecionado: "+modo);
}

async function calcular(){

    const valor=document.getElementById("input").value;

    let body={modo:modoAtual};

    if(modoAtual==="fatorial"){
        body.n=valor;
    }
    else if(modoAtual==="combinacao" || modoAtual==="permutacao"){
        let partes=valor.split(",");
        body.n=partes[0];
        body.k=partes[1];
    }
    else if(modoAtual==="limite"){
        let partes=valor.split(",");
        body.expressao=partes[0];
        body.valor=partes[1];
    }
    else{
        body.expressao=valor;
    }

    const response=await fetch("https://bot-estudos-production.up.railway.app/calcular",{
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body:JSON.stringify(body)
    });

    const data=await response.json();

    document.getElementById("resultado").innerText=
        data.resultado || data.erro;
}

</script>

</body>
    </html>
