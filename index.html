<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Matem√°ticaBC.com - Calculadora Interativa</title>

<!-- Bibliotecas -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.8.0/math.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/algebrite/1.5.0/algebrite.min.js"></script>

<style>
body{
    margin:0;
    font-family:Arial, sans-serif;
    background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
    color:white;
}

header{
    text-align:center;
    padding:15px;
    font-size:22px;
    font-weight:bold;
}

.nav{
    display:flex;
    justify-content:space-around;
    background:#1f4068;
}

.nav button{
    flex:1;
    padding:12px;
    border:none;
    background:none;
    color:white;
    font-weight:bold;
    cursor:pointer;
    transition:0.2s;
}

.nav button.active{
    background:#00c6ff;
    color:black;
}

.section{
    display:none;
    padding:20px;
}

.section.active{
    display:block;
}

input{
    width:100%;
    padding:12px;
    border-radius:10px;
    border:none;
    margin-bottom:10px;
    font-size:16px;
}

button.calc{
    width:100%;
    padding:12px;
    border:none;
    border-radius:10px;
    background:#00c6ff;
    font-weight:bold;
    cursor:pointer;
    margin-bottom:10px;
}

.result{
    margin-top:15px;
    background:rgba(255,255,255,0.1);
    padding:15px;
    border-radius:15px;
    min-height:40px;
    font-size:16px;
}
</style>
</head>
<body>

<header>üìê Calculadora Matem√°tica Interativa com IA</header>

<div class="nav">
    <button onclick="showTab('basica', this)" class="active">B√°sica</button>
    <button onclick="showTab('algebra', this)">√Ålgebra</button>
    <button onclick="showTab('calculo', this)">C√°lculo</button>
    <button onclick="showTab('geometria', this)">Geometria</button>
</div>

<!-- B√°sica -->
<div id="basica" class="section active">
    <input type="text" id="basicInput" placeholder="Ex: 5^2 + 3">
    <button class="calc" onclick="calcBasic()">Calcular</button>
    <div class="result" id="basicResult"></div>
</div>

<!-- √Ålgebra -->
<div id="algebra" class="section">
    <input type="text" id="algebraInput" placeholder="Ex: x^2 - 4">
    <input type="text" id="userAnswer" placeholder="Sua resposta">
    <button class="calc" onclick="solveEquation()">Resolver</button>
    <button class="calc" onclick="corrigir()">Corrigir Resposta</button>
    <button class="calc" onclick="solucaoIA('algebra')">üí° Solu√ß√£o IA</button>
    <div class="result" id="algebraResult"></div>
</div>

<!-- C√°lculo -->
<div id="calculo" class="section">
    <select id="calcMode">
        <option value="derivar">Derivar</option>
        <option value="integrar">Integrar</option>
    </select>
    <input type="text" id="calcInput" placeholder="Ex: x^3">
    <button class="calc" onclick="calcCalculus()">Calcular</button>
    <button class="calc" onclick="solucaoIA('calculo')">üí° Solu√ß√£o IA</button>
    <div class="result" id="calcResult"></div>
</div>

<!-- Geometria -->
<div id="geometria" class="section">
    <input type="number" id="lado" placeholder="Lado do Cubo">
    <button class="calc" onclick="volumeCubo()">Calcular Volume</button>
    <div class="result" id="geoResult"></div>
</div>

<script>
// Navega√ß√£o por abas
function showTab(id, btn){
    document.querySelectorAll('.section').forEach(sec=>sec.classList.remove('active'));
    document.querySelectorAll('.nav button').forEach(b=>b.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    btn.classList.add('active');
}

// ----------------------
// Aba B√°sica
function calcBasic(){
    try{
        let v = document.getElementById("basicInput").value;
        document.getElementById("basicResult").innerText = math.evaluate(v);
    }catch{
        document.getElementById("basicResult").innerText = "Erro";
    }
}

// ----------------------
// Aba √Ålgebra
function solveEquation(){
    try{
        let eq = document.getElementById("algebraInput").value;
        let res = math.solve(eq, 'x');
        document.getElementById("algebraResult").innerText = res;
    }catch{
        document.getElementById("algebraResult").innerText = "Use formato: x^2 - 4";
    }
}

function corrigir(){
    const respostaUsuario = document.getElementById("userAnswer").value;
    const resultadoCorreto = math.evaluate(document.getElementById("algebraInput").value);
    if(respostaUsuario == resultadoCorreto){
        alert("‚úÖ Correto!");
    } else {
        alert("‚ùå Errado! Resposta correta: " + resultadoCorreto);
    }
}

// ----------------------
// Aba C√°lculo
function calcCalculus(){
    try{
        let expr = document.getElementById("calcInput").value;
        let mode = document.getElementById("calcMode").value;
        let output = document.getElementById("calcResult");

        if(mode === "derivar"){
            output.innerText = Algebrite.run("d(" + expr + ", x)");
        } else if(mode === "integrar"){
            output.innerText = Algebrite.run("integral(" + expr + ", x)");
        }
    }catch{
        document.getElementById("calcResult").innerText = "Erro";
    }
}

// ----------------------
// Aba Geometria
function volumeCubo(){
    let lado = document.getElementById("lado").value;
    document.getElementById("geoResult").innerText =
        "Volume = " + (lado**3);
}

// ----------------------
// Fun√ß√£o IA via Railway
async function solucaoIA(modalidade){
    let prompt;
    let expr;

    if(modalidade === "algebra"){
        expr = document.getElementById("algebraInput").value;
        prompt = "Resolva este problema de √°lgebra passo a passo: " + expr;
        document.getElementById("algebraResult").innerText = "Calculando com IA...";
    } else if(modalidade === "calculo"){
        expr = document.getElementById("calcInput").value;
        prompt = "Resolva este problema de c√°lculo passo a passo: " + expr;
        document.getElementById("calcResult").innerText = "Calculando com IA...";
    }

    try{
        const response = await fetch("https://railway.com/project/347287a2-7e13-4794-a0e3-8b8c932e7205/service/e2f45690-f6c5-49bf-b566-3fb55d0e4eb5?environmentId=06d2c674-4fb9-4c19-80f3-f136c8ff4de8", {
            method:"POST",
            headers: {"Content-Type":"application/json"},
            body: JSON.stringify({ prompt })
        });

        const data = await response.json();
        if(modalidade === "algebra"){
            document.getElementById("algebraResult").innerText = data.answer;
        } else {
            document.getElementById("calcResult").innerText = data.answer;
        }

    } catch(err){
        if(modalidade === "algebra"){
            document.getElementById("algebraResult").innerText = "Erro ao consultar IA";
        } else {
            document.getElementById("calcResult").innerText = "Erro ao consultar IA";
        }
        console.error(err);
    }
}
</script>

</body>
    </html>
